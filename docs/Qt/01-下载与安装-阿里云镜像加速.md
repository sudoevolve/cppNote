# 01-下载与安装：阿里云镜像加速

目录页：见 [Qt 教程目录](00-目录.md)

## 目标

- 在 Windows / macOS / Linux 上正确安装 Qt（包含 Qt Creator）
- 在中国网络环境下用阿里云镜像加速下载，避免下载速度慢或超时
- 安装后能在 Qt Creator 里创建工程并跑起来（验证安装成功）

## 先决知识（可选）

- 会解压、会双击安装、会在终端里运行一条命令

---

## 1. 你要下载哪个安装包：在线安装器（推荐）

- 专业名称：Qt Online Installer（Qt 在线安装器）
- 类比：像“应用商店下载器”，你先装一个安装器，再在里面勾选你要的 Qt 版本/组件
- 作用：组件可选、后续升级方便（同一个 MaintenanceTool 可更新/补装）
- 规则/坑点：下载组件时很依赖网络与镜像站速度；在国内经常需要指定镜像

你可能还会看到 Offline Installer（离线包）：
- 类比：像“整包快递”，一次性下载一个很大的完整包
- 结论：新手优先用在线安装器，配合镜像更省事

---

## 2. 下载 Qt Online Installer

1. 打开 Qt 官方下载页，选择开源（Open Source）在线安装器
2. 下载后得到一个类似下面名字的文件（不同版本名字会略有差异）：
   - Windows：`qt-unified-windows-x64-*-online.exe`
   - macOS：`qt-unified-mac-x64-*-online.dmg` 或 `*.app`
   - Linux：`qt-unified-linux-x64-*-online.run`

---

## 3. 中国网络：用阿里云镜像加速（关键）

### 3.1 镜像是什么，你在改什么

- 专业名称：Mirror（镜像站）
- 类比：同一份货（Qt 安装包）在很多仓库都有，你选离你近、速度快的仓库下载
- 作用：显著降低超时/断线/卡进度条的概率
- 规则/坑点：Qt 安装器的 `--mirror` 需要填“镜像站根地址”，不要填完整的 `/online/...` 路径，并且不要在末尾加 `/`（这点是安装器的约定）  
  参考：Qt Wiki 的说明与示例（`--mirror`，以及“不要使用完整路径、不要以 / 结尾”）[Qt Wiki: Online Installer 4.x](https://wiki.qt.io/Online_Installer_4.x)

### 3.2 Windows（推荐做法）

1. 把安装器 exe 放到一个容易找到的目录（例如 `D:\Download\Qt`）
2. 在这个目录空白处按住 Shift 右键，选择“在此处打开 PowerShell 窗口”
3. 用 `--mirror` 启动安装器（把文件名替换成你实际下载的那个）：

```powershell
.\qt-unified-windows-x64-*-online.exe --mirror https://mirrors.aliyun.com/qt
```

说明：
- `https://mirrors.aliyun.com/qt` 是镜像站根地址示例；安装器会自己拼出后续的 `/online/qtsdkrepository/...` 路径
- 如果你下载的是 32 位安装器或 ARM 版本，文件名会不同，但 `--mirror` 的写法一样

### 3.3 macOS / Linux（同理）

在终端里进入安装器所在目录，然后：

```bash
./qt-unified-*-online.* --mirror https://mirrors.aliyun.com/qt
```

---

## 4. 安装时怎么选组件（新手不容易踩坑的选择）

### 4.1 选 Qt 版本：优先选“最新 LTS”

- 类比：LTS 像“长期维护版”，更新频率没那么激进，但更稳
- 你在安装器里通常会看到多个 Qt 6.x（以及可能的 Qt 5.x）
- 新手建议：优先 Qt 6 的 LTS（除非你明确要兼容旧项目才选 Qt 5）

### 4.2 选编译器（Windows 最关键）

你会看到类似这些 Kit（套件）：
- MinGW：Qt 自带一套 GCC 工具链，上手更省事
- MSVC：使用 Visual Studio 的编译器，更贴近企业开发环境

新手建议（更省心）：
- 先选 MinGW 这一套（安装器里通常会给你配好对应版本）
- Qt Creator 勾选默认就行（它是你主要的 IDE）

---

## 常见坑

- 错误：双击直接启动安装器，但下载阶段一直超时/卡住  
  结果：进度条来回重试，甚至卡在 99%  
  正确：用命令行加 `--mirror` 指定镜像站（见 3.2）

- 错误：给 `--mirror` 填了很长的完整路径（带 `/online/...`）或末尾带 `/`  
  结果：安装器拼接出来的地址不对，导致下载失败  
  正确：只填“镜像根地址”，并且不要以 `/` 结尾（见 Qt Wiki）  
  参考：[Qt Wiki: Online Installer 4.x](https://wiki.qt.io/Online_Installer_4.x)

- 错误：不知道该换哪个镜像  
  结果：一直碰运气  
  正确：从官方镜像列表挑一个离你网络更近的（安装器也支持 `--mirror` 切换）  
  参考：Qt Wiki 提到的 mirrorlist 地址（示例为 Windows x86 仓库）[Qt Wiki: Online Installer 4.x](https://wiki.qt.io/Online_Installer_4.x)

---

## 小练习（验证安装成功）

1. 打开 Qt Creator
2. 新建一个最简单的工程（随便选一个模板，只要能编译运行）
3. 点运行，看到窗口弹出来或控制台输出正常

如果能跑起来，说明：
- Qt 本体安装 OK
- 你选的编译器/Kit 可用
- Qt Creator 能正确找到 Qt 与工具链

---

## 小结

- Qt 推荐用 Online Installer 安装，后续升级/补装更方便
- 中国网络环境优先用 `--mirror` 指定阿里云镜像站加速（按 Qt Wiki 的约定填写镜像根地址）
- 安装完成后，用 Qt Creator 新建工程跑一遍，是最快的“自检”

下一篇：见 [02-QtCreator入门-创建运行第一个工程](02-QtCreator入门-创建运行第一个工程.md)
